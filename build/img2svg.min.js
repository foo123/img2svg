/**
*
*   img2svg.js
*   @version: 1.0.0
*   @built on 2023-09-02 18:17:25
*
*   Vectorize image data based on potrace algorithm with color
*   https://github.com/foo123/img2svg.js
*
**/!function(t,r,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[r]=n.call(t)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(r)?define(r,["module"],function(r){return n.moduleUri=r.uri,n.call(t)}):r in t||(t[r]=n.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[r]})}("undefined"!=typeof self?self:this,"img2svg",function(){"use strict";var b=Math,F="undefined"!=typeof Uint8Array?Uint8Array:Array,O="undefined"!=typeof Float32Array?Float32Array:Array;function r(r,t){var n=(t=t||{}).mode||"color",e=r.data,o=r.width,r=r.height;return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+r+'" viewBox="0 0 '+o+" "+r+'">'+function(r,t,n,e,o){if(o&&"hue"===o.mode)return function(r,t,n,e){var o,i,a,u,y,f,l,x,c,s,h,p,d,v=t*n,w=r.length,m=R(null==e.depth?6:e.depth,1,360),g=R(null==e.depthHue?m:e.depthHue,1,360),A="";for(o=b.floor(360/g),i=new O(g),a=new O(g),u=new O(g),h=new O(g),p=new Array(g),c=x=0;x<w;x+=4,++c)0<r[x+3]&&(y=r[x]/255,f=r[x+1]/255,l=r[x+2]/255,n=b.floor(function(r,t,n){var e,o;e=b.max(r,t,n),o=b.min(r,t,n),e=0==(o=e-o)?0:e===r?60*(0+(t-n)/o):e===t?60*(2+(n-r)/o):60*(4+(r-t)/o);(e=b.round(e))<0&&(e+=360);360<=e&&(e-=360);return R(e,0,360)}(y,f,l)/o),i[n]=(i[n]||0)+y,a[n]=(a[n]||0)+f,u[n]=(u[n]||0)+l,h[n]=(h[n]||0)+1,p[n]=[c,p[n]||null]);for(n=0;n<g;++n)if(0<h[n]){for(d=new F(v),s=p[n],s=p[n];null!=s;s=s[1])d[s[0]]=255;e.color=function(r,t,n){r=R(b.round(r),0,255).toString(16),t=R(b.round(t),0,255).toString(16),n=R(b.round(n),0,255).toString(16);return"#"+(r.length<2?"0":"")+r+(t.length<2?"0":"")+t+(n.length<2?"0":"")+n}(255*i[n]/h[n],255*a[n]/h[n],255*u[n]/h[n]),e.partial=!0,A+=X.trace(d,t,n,e),d=null,p[n]=null}return p=h=u=a=i=null,A}(r,t,n,e);var i,a,u,y,f,l,x,c,s,h,p,d={},v="";if(r=function(r,t,n){var e,o,i,a,u,y,f,l,x,c,s=r.length,h=R(null==t.depth?2:t.depth,1,256),p=R(null==t.depthR?h:t.depthR,1,256),d=R(null==t.depthG?h:t.depthG,1,256),v=R(null==t.depthB?h:t.depthB,1,256),h=R(null==t.depthA?h:t.depthA,1,256);if(n&&"gray"===n.mode){if(256===d&&256===h)return r;for(a=b.floor(256/d),y=b.floor(256/h),l=b.floor(a/2),c=b.floor(y/2),o=new F(s),e=0;e<s;e+=4)0<r[e+3]?(o[e+2]=o[e]=o[e+1]=R(b.floor(r[e+1]/a)*a+l,0,255),o[e+3]=R(b.floor(r[e+3]/y)*y+c,0,255)):o[e+3]=o[e+2]=o[e+1]=o[e]=0}else{if(256===p&&256===d&&256===v&&256===h)return r;for(i=b.floor(256/p),a=b.floor(256/d),u=b.floor(256/v),y=b.floor(256/h),f=b.floor(i/2),l=b.floor(a/2),x=b.floor(u/2),c=b.floor(y/2),o=new F(s),e=0;e<s;e+=4)0<r[e+3]?(o[e]=R(b.floor(r[e]/i)*i+f,0,255),o[e+1]=R(b.floor(r[e+1]/a)*a+l,0,255),o[e+2]=R(b.floor(r[e+2]/u)*u+x,0,255),o[e+3]=R(b.floor(r[e+3]/y)*y+c,0,255)):o[e+3]=o[e+2]=o[e+1]=o[e]=0}return o}(r,e,o),f=t*n,y=r.length,o&&"gray"===o.mode)for(a=i=0;i<y;i+=4,++a)0<r[i+3]&&(x=r[i+1],s=r[i+3],h=String(x),h+=","+h+","+h+","+String(s),d[h]=[a,d[h]||null]);else for(a=i=0;i<y;i+=4,++a)0<r[i+3]&&(l=r[i],x=r[i+1],c=r[i+2],s=r[i+3],h=String(l)+","+String(x)+","+String(c)+","+String(s),d[h]=[a,d[h]||null]);for(h in d)if((u=d[h])&&u.length){for(p=new F(f);null!=u;u=u[1])p[u[0]]=255;e.color="rgb("+h.split(",").slice(0,3).join(",")+")",e.opacity=String((+h.split(",").pop()/255).toFixed(2)),e.partial=!0,v+=X.trace(p,t,n,e),p=null,d[h]=null}return d=null,v}(e,o,r,t,{mode:n})+"</svg>"}function R(r,t,n){return b.min(b.max(r,t),n)}r.VERSION="1.0.0";t={VERSION:"1.16"},e="prototype",ft=Math,a="undefined"!=typeof Uint8Array?Uint8Array:Array,lt={turnpolicy:"minority",turdsize:2,optcurve:!0,alphamax:1,opttolerance:.2,minpathsegments:2,connectedcomponents:!0},t.defaultOptions=function(){return ct({},lt)},t.trace=function(j,T,B,r){ct(r,lt);for(var j=function(r,t){var n,e,o,i=r.copy(),a=new st(0,0);for(;a=function(r,t){var n=r.toIndex(t);for(;n<r.size&&!r.data[n];)++n;return n<r.size&&r.index(n)}(i,a);)n=function(r,t,n,e){var o,i,a,u,y=new pt,f=y.pt,l=n.x,x=n.y,c=0,s=1;y.sign=r.at(n.x,n.y)?"+":"-";for(;;){if(f.push(new st(l,x)),l>y.maxX&&(y.maxX=l),l<y.minX&&(y.minX=l),x>y.maxY&&(y.maxY=x),x<y.minY&&(y.minY=x),++y.len,l+=c,x+=s,y.area-=l*s,l===n.x&&x===n.y)break;i=t.at(l+(c-s-1)/2,x+(s+c-1)/2),a=t.at(l+(c+s-1)/2,x+(s-c-1)/2),i&&!a?(u="majority"===e.turnpolicy||"minority"===e.turnpolicy?function(r,t,n){var e,o,i;for(e=2;e<5;++e){for(i=0,o=1-e;o<=e-1;++o)i=(i=(i=(i+=r.at(t+o,n+e-1)?1:-1)+(r.at(t+e-1,n+o-1)?1:-1))+(r.at(t+o-1,n-e)?1:-1))+(r.at(t-e,n+o)?1:-1);if(0<i)return 1;if(i<0)return 0}return 0}(t,l,x):0,s="right"===e.turnpolicy||"black"===e.turnpolicy&&"+"===y.sign||"white"===e.turnpolicy&&"-"===y.sign||"majority"===e.turnpolicy&&u||"minority"===e.turnpolicy&&!u?(o=c,c=-s,o):(o=c,c=s,-o)):i?(o=c,c=-s,s=o):a||(o=c,c=s,s=-o)}return y}(r,i,a,t),gt(i,n),n.area>t.turdsize&&(o=o||n,e&&(e.next=e.sibling=n),e=n);t.connectedcomponents&&(o=function(r){var t,n,e,o;for(t=r;t;t=t.sibling)for(e=null,n=(o=t).next;n;)n=(function(r,t){return!(r.minX>t.maxX||r.minY>t.maxY||r.maxX<t.minX||r.maxY<t.minY)}(t,n)?(o.sibling=n.sibling,n.sibling=null,e?e.sibling=n:t.childlist=n,e=n,o):o=n).sibling;return r}(o));return i=null,o}(new ht(T,B,j),r),I=r,t=j;t;t=t.next){H=G=$=M=n=N=void 0;var N=t,n,M,$,G=N.pt,H=(N.x0=G[0].x,N.y0=G[0].y,N.sums=[],N.sums);for(H.push(new wt(0,0,0,0,0)),n=0;n<N.len;++n)M=G[n].x-N.x0,$=G[n].y-N.y0,H.push(new wt(H[n].x+M,H[n].y+$,H[n].xy+M*$,H[n].x2+M*M,H[n].y2+$*$));c=W=Q=K=J=i=o=e=D=rr=x=l=f=y=_=Z=L=u=a=P=void 0;var P=t,L,D,e,o,i,J,K,Q,W,a=P.len,u=P.pt,Z=new Array(a),_=new Array(a),y=new Array(4),f=[new st,new st],l=new st,x=new st,rr=new st,c=0;for(P.lon=new Array(a),e=a-1;0<=e;--e)u[e].x!=u[c].x&&u[e].y!=u[c].y&&(c=e+1),_[e]=c;for(e=a-1;0<=e;--e){for(y[0]=y[1]=y[2]=y[3]=0,L=(3+3*(u[At(e+1,a)].x-u[e].x)+(u[At(e+1,a)].y-u[e].y))/2,++y[L],f[0].x=0,f[0].y=0,f[1].x=0,f[1].y=0,c=_[e],i=e;;){if(D=0,L=(3+3*Ot(u[c].x-u[i].x)+Ot(u[c].y-u[i].y))/2,++y[L],y[0]&&y[1]&&y[2]&&y[3]){Z[e]=i,D=1;break}if(l.x=u[c].x-u[e].x,l.y=u[c].y-u[e].y,bt(f[0],l)<0||0<bt(f[1],l))break;if(ft.abs(l.x)<=1&&ft.abs(l.y)<=1||(x.x=l.x+(0<=l.y&&(0<l.y||l.x<0)?1:-1),x.y=l.y+(l.x<=0&&(l.x<0||l.y<0)?1:-1),0<=bt(f[0],x)&&(f[0].x=x.x,f[0].y=x.y),x.x=l.x+(l.y<=0&&(l.y<0||l.x<0)?1:-1),x.y=l.y+(0<=l.x&&(0<l.x||l.y<0)?1:-1),bt(f[1],x)<=0&&(f[1].x=x.x,f[1].y=x.y)),!Ft(c=_[i=c],e,i))break}0===D&&(rr.x=Ot(u[c].x-u[i].x),rr.y=Ot(u[c].y-u[i].y),l.x=u[i].x-u[e].x,l.y=u[i].y-u[e].y,J=bt(f[0],l),K=bt(f[0],rr),Q=bt(f[1],l),W=bt(f[1],rr),o=1e7,K<0&&(o=ft.floor(J/-K)),0<W&&(o=ft.min(o,ft.floor(-Q/W))),Z[e]=At(i+o,a))}for(o=Z[a-1],P.lon[a-1]=o,e=a-2;0<=e;--e)Ft(e+1,Z[e],o)&&(o=Z[e]),P.lon[e]=o;for(e=a-1;Ft(At(e+1,a),o,P.lon[e]);--e)P.lon[e]=o;ar=ir=or=cr=xr=lr=fr=yr=ur=p=er=nr=h=s=tr=void 0;var tr=t,s,h,nr,er,or,ir,ar,p=tr.len,ur=new Array(p+1),yr=new Array(p+1),fr=new Array(p),lr=new Array(p+1),xr=new Array(p+1),cr=new Array(p+1);for(s=0;s<p;++s)(ar=At(tr.lon[At(s-1,p)]-1,p))==s&&(ar=At(s+1,p)),fr[s]=ar<s?p:ar;for(h=1,s=0;s<p;++s)for(;h<=fr[s];)lr[h]=s,h++;for(h=s=0;s<p;++h)xr[h]=s,s=fr[s];for(xr[h]=p,s=p,h=nr=h;0<h;--h)cr[h]=s,s=lr[s];for(cr[0]=0,ur[0]=0,h=1;h<=nr;++h)for(s=cr[h];s<=xr[h];++s){for(ir=-1,er=xr[h-1];er>=lr[s];--er)or=function(r,t,n){var e,o,i,a,u,y,f=r.len,l=r.pt,r=r.sums,x=0;f<=n&&(n-=f,x=1);x=0===x?(e=r[n+1].x-r[t].x,o=r[n+1].y-r[t].y,a=r[n+1].x2-r[t].x2,i=r[n+1].xy-r[t].xy,u=r[n+1].y2-r[t].y2,n+1-t):(e=r[n+1].x-r[t].x+r[f].x,o=r[n+1].y-r[t].y+r[f].y,a=r[n+1].x2-r[t].x2+r[f].x2,i=r[n+1].xy-r[t].xy+r[f].xy,u=r[n+1].y2-r[t].y2+r[f].y2,n+1-t+f);return r=(l[t].x+l[n].x)/2-l[0].x,f=(l[t].y+l[n].y)/2-l[0].y,y=l[n].x-l[t].x,n=-(l[n].y-l[t].y),l=n*n*((a-2*e*r)/x+r*r)+2*n*y*((i-e*f-o*r)/x+r*f)+y*y*((u-2*o*f)/x+f*f),ft.sqrt(l)}(tr,er,s)+ur[er],(ir<0||or<ir)&&(yr[s]=er,ir=or);ur[s]=ir}for(tr.m=nr,tr.po=new Array(nr),s=p,h=nr-1;0<s;--h)s=yr[s],tr.po[h]=s;Ar=gr=mr=wr=vr=dr=pr=hr=b=A=R=g=m=w=v=sr=O=Yr=Sr=kr=Xr=Rr=Or=Fr=br=F=d=void 0;var d=t,sr,v,w,m,g,A,b,hr,pr,dr,vr,wr,mr,gr,Ar,F=d.m,br=d.po,Fr=d.len,Or=d.pt,Rr=d.x0,Xr=d.y0,kr=new Array(F),Sr=new Array(F),Yr=new Array(F),O=new Array(3),R=new st;for(d.curve=new dt(F),v=0;v<F;++v)w=br[At(v+1,F)],w=At(w-br[v],Fr)+br[v],kr[v]=new st,Sr[v]=new st,!function(r,t,n,e,o){var i,a,u,y,f,l,x=r.len,r=r.sums,c=0;for(;x<=n;)n-=x,c+=1;for(;x<=t;)t-=x,--c;for(;n<0;)n+=x,--c;for(;t<0;)t+=x,c+=1;f=r[n+1].x-r[t].x+c*r[x].x,i=r[n+1].y-r[t].y+c*r[x].y,y=r[n+1].x2-r[t].x2+c*r[x].x2,u=r[n+1].xy-r[t].xy+c*r[x].xy,r=r[n+1].y2-r[t].y2+c*r[x].y2,a=n+1-t+c*x,e.x=f/a,e.y=i/a,e=(u-f*i/a)/a,f=((u=(y-f*f/a)/a)+(y=(r-i*i/a)/a)+ft.sqrt((u-y)*(u-y)+4*e*e))/2,u-=f,y-=f,ft.abs(u)>=ft.abs(y)?0!==(l=Ct(u,e))&&(o.x=-e/l,o.y=u/l):0!==(l=Ct(y,e))&&(o.x=-y/l,o.y=e/l);0===l&&(o.x=o.y=0)}(d,br[v],w,kr[v],Sr[v]);for(v=0;v<F;++v)if(Yr[v]=new vt,0===(sr=Sr[v].x*Sr[v].x+Sr[v].y*Sr[v].y))for(w=0;w<3;++w)for(m=0;m<3;++m)Yr[v].data[3*w+m]=0;else for(O[0]=Sr[v].y,O[1]=-Sr[v].x,O[2]=-O[1]*kr[v].y-O[0]*kr[v].x,g=0;g<3;++g)for(m=0;m<3;++m)Yr[v].data[3*g+m]=O[g]*O[m]/sr;for(v=0;v<F;++v){for(A=new vt,b=new st,R.x=Or[br[v]].x-Rr,R.y=Or[br[v]].y-Xr,w=At(v-1,F),g=0;g<3;++g)for(m=0;m<3;++m)A.data[3*g+m]=Yr[w].at(g,m)+Yr[v].at(g,m);for(;;){if(0!=(dr=A.at(0,0)*A.at(1,1)-A.at(0,1)*A.at(1,0))){b.x=(-A.at(0,2)*A.at(1,1)+A.at(1,2)*A.at(0,1))/dr,b.y=(A.at(0,2)*A.at(1,0)-A.at(1,2)*A.at(0,0))/dr;break}for(A.at(0,0)>A.at(1,1)?(O[0]=-A.at(0,1),O[1]=A.at(0,0)):A.at(1,1)?(O[0]=-A.at(1,1),O[1]=A.at(1,0)):(O[0]=1,O[1]=0),sr=O[0]*O[0]+O[1]*O[1],O[2]=-O[1]*R.y-O[0]*R.x,g=0;g<3;++g)for(m=0;m<3;++m)A.data[3*g+m]+=O[g]*O[m]/sr}if(hr=ft.abs(b.x-R.x),pr=ft.abs(b.y-R.y),hr<=.5&&pr<=.5)d.curve.vertex[v]=new st(b.x+Rr,b.y+Xr);else{if(vr=Rt(A,R),mr=R.x,gr=R.y,0!==A.at(0,0))for(Ar=0;Ar<2;++Ar)b.y=R.y-.5+Ar,b.x=-(A.at(0,1)*b.y+A.at(0,2))/A.at(0,0),hr=ft.abs(b.x-R.x),wr=Rt(A,b),hr<=.5&&wr<vr&&(vr=wr,mr=b.x,gr=b.y);if(0!==A.at(1,1))for(Ar=0;Ar<2;++Ar)b.x=R.x-.5+Ar,b.y=-(A.at(1,0)*b.x+A.at(1,2))/A.at(1,1),pr=ft.abs(b.y-R.y),wr=Rt(A,b),pr<=.5&&wr<vr&&(vr=wr,mr=b.x,gr=b.y);for(g=0;g<2;++g)for(m=0;m<2;++m)b.x=R.x-.5+g,b.y=R.y-.5+m,(wr=Rt(A,b))<vr&&(vr=wr,mr=b.x,gr=b.y);d.curve.vertex[v]=new st(mr+Rr,gr+Xr)}}if("-"===t.sign){Er=zr=Ur=Vr=qr=Cr=void 0;var Cr=t,Ur,zr,Er,Cr,qr=(Cr=Cr.curve).n,Vr=Cr.vertex;for(Ur=0,zr=qr-1;Ur<zr;++Ur,--zr)Er=Vr[Ur],Vr[Ur]=Vr[zr],Vr[zr]=Er}Ir=k=S=Br=X=Tr=Y=Nr=jr=Cr=void 0;var jr=I,Tr,X,k,S,Br,Ir,Nr=(Cr=t).curve.n,Y=Cr.curve;for(Tr=0;Tr<Nr;++Tr)X=At(Tr+1,Nr),Br=At(Tr+2,Nr),Ir=Xt(.5,Y.vertex[Br],Y.vertex[X]),0!==(S=function(r,t){var n=function(r,t){return new st(-Ot(t.y-r.y),Ot(t.x-r.x))}(r,t);return n.y*(t.x-r.x)-n.x*(t.y-r.y)}(Y.vertex[Tr],Y.vertex[Br]))?(S=kt(Y.vertex[Tr],Y.vertex[X],Y.vertex[Br])/S,S=ft.abs(S),k=1<S?1-1/S:0,k/=.75):k=4/3,(Y.alpha0[X]=k)>=jr.alphamax?(Y.tag[X]="CORNER",Y.c[3*X+1]=Y.vertex[X]):(k<.55?k=.55:1<k&&(k=1),S=Xt(.5+.5*k,Y.vertex[Tr],Y.vertex[X]),Br=Xt(.5+.5*k,Y.vertex[Br],Y.vertex[X]),Y.tag[X]="CURVETO",Y.c[3*X+0]=S,Y.c[3*X+1]=Br),Y.c[3*X+2]=Ir,Y.alpha[X]=k,Y.beta[X]=.5;if(Y.alphacurve=1,I.optcurve){nt=tt=Kr=Jr=z=Dr=Lr=Pr=Hr=rt=U=C=Gr=_r=V=Zr=Wr=Qr=q=E=$r=Mr=void 0;var Mr=t,$r=I,Gr,C,U,Hr,Pr,Lr,Dr,z,Jr,Kr,E=Mr.curve,q=E.n,Qr=E.vertex,Wr=new Array(q+1),Zr=new Array(q+1),V=new Array(q+1),_r=new Array(q+1),rt=new mt,tt=new Array(q),nt=new Array(q+1);for(C=0;C<q;++C)"CURVETO"===E.tag[C]?tt[C]=Ot(kt(Qr[At(C-1,q)],Qr[C],Qr[At(C+1,q)])):tt[C]=0;for(nt[Lr=0]=0,Hr=E.vertex[0],C=0;C<q;++C)Pr=At(C+1,q),"CURVETO"===E.tag[Pr]&&(Dr=E.alpha[Pr],Lr=(Lr+=.3*Dr*(4-Dr)*kt(E.c[3*C+2],Qr[Pr],E.c[3*Pr+2])/2)+kt(Hr,E.c[3*C+2],E.c[3*Pr+2])/2),nt[C+1]=Lr;for(Wr[0]=-1,Zr[0]=0,V[0]=0,U=1;U<=q;++U)for(Wr[U]=U-1,Zr[U]=Zr[U-1],V[U]=V[U-1]+1,C=U-2;0<=C&&!function(r,t,n,e,o,i,a){var u,y,f,l,x,c,s,h,p,d,v,w,m,g,A,b,F,O=r.curve.n,R=r.curve,X=R.vertex;if(t===n)return 1;if(x=At((u=t)+1,O),y=At(u+1,O),0===(l=i[y]))return 1;for(c=Ut(X[t],X[x]),u=y;u!=n;u=y){if(y=At(u+1,O),f=At(u+2,O),i[y]!==l)return 1;if(Ot(St(X[t],X[x],X[y],X[f]))!==l)return 1;if(function(r,t,n,e){var o;return o=t.x-r.x,t=t.y-r.y,r=e.x-n.x,e=e.y-n.y,o*r+t*e}(X[t],X[x],X[y],X[f])<c*Ut(X[y],X[f])*-.999847695156)return 1}p=R.c[3*At(t,O)+2].copy(),d=X[At(t+1,O)].copy(),v=X[At(n,O)].copy(),w=R.c[3*At(n,O)+2].copy(),r=a[n]-a[t],r-=kt(X[0],R.c[3*t+2],R.c[3*n+2])/2,n<=t&&(r+=a[O]);if(a=kt(p,d,v),g=kt(p,d,w),A=kt(p,v,w),b=a+A-g,g===a)return 1;if(a=g/(g-a),0==(g=g*(F=A/(A-b))/2))return 1;for(A=r/g,b=2-ft.sqrt(4-A/.3),e.c[0]=Xt(F*b,p,d),e.c[1]=Xt(a*b,w,v),e.alpha=b,e.t=F,e.s=a,d=e.c[0].copy(),v=e.c[1].copy(),e.pen=0,u=At(t+1,O);u!=n;u=y){if(y=At(u+1,O),(F=Et(p,d,v,w,X[u],X[y]))<-.5)return 1;if(m=zt(F,p,d,v,w),0===(c=Ut(X[u],X[y])))return 1;if(s=kt(X[u],X[y],m)/c,ft.abs(s)>o)return 1;if(Yt(X[u],X[y],m)<0||Yt(X[y],X[u],m)<0)return 1;e.pen+=s*s}for(u=t;u!=n;u=y){if(y=At(u+1,O),(F=Et(p,d,v,w,R.c[3*u+2],R.c[3*y+2]))<-.5)return 1;if(m=zt(F,p,d,v,w),0===(c=Ut(R.c[3*u+2],R.c[3*y+2])))return 1;if(s=kt(R.c[3*u+2],R.c[3*y+2],m)/c,h=kt(R.c[3*u+2],R.c[3*y+2],X[y])/c,(h*=.75*R.alpha[y])<0&&(s=-s,h=-h),s<h-o)return 1;s<h&&(e.pen+=(s-h)*(s-h))}return 0}(Mr,C,At(U,q),rt,$r.opttolerance,tt,nt);--C)(V[U]>V[C]+1||V[U]==V[C]+1&&Zr[U]>Zr[C]+rt.pen)&&(Wr[U]=C,Zr[U]=Zr[C]+rt.pen,V[U]=V[C]+1,_r[U]=rt,rt=new mt);for(Gr=V[q],z=new dt(Gr),Jr=new Array(Gr),Kr=new Array(Gr),U=q,C=Gr-1;0<=C;--C)Wr[U]===U-1?(z.tag[C]=E.tag[At(U,q)],z.c[3*C+0]=E.c[3*At(U,q)+0],z.c[3*C+1]=E.c[3*At(U,q)+1],z.c[3*C+2]=E.c[3*At(U,q)+2],z.vertex[C]=E.vertex[At(U,q)],z.alpha[C]=E.alpha[At(U,q)],z.alpha0[C]=E.alpha0[At(U,q)],z.beta[C]=E.beta[At(U,q)],Jr[C]=Kr[C]=1):(z.tag[C]="CURVETO",z.c[3*C+0]=_r[U].c[0],z.c[3*C+1]=_r[U].c[1],z.c[3*C+2]=E.c[3*At(U,q)+2],z.vertex[C]=Xt(_r[U].s,E.c[3*At(U,q)+2],Qr[At(U,q)]),z.alpha[C]=_r[U].alpha,z.alpha0[C]=_r[U].alpha,Jr[C]=_r[U].s,Kr[C]=_r[U].t),U=Wr[U];for(C=0;C<Gr;++C)Pr=At(C+1,Gr),z.beta[C]=Jr[C]/(Jr[C]+Kr[Pr]);z.alphacurve=1,Mr.curve=z}}var et=+(r.scale||1),ot=r.color||"#000",it=r.opacity||"1.0",at=r.outline,ut=!r.partial,T=T*et,B=B*et,yt="";return ut&&(yt+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+T+'" height="'+B+'" viewBox="0 0 '+T+" "+B+'">'),yt+=function r(t,n,e,o,i,a){if(!t)return"";var u="";i||a||(u+="<path "+n+' d="');for(;t;t=t.sibling)u=(u=(u=(u+=!a&&i?"<path "+n+' d="':"")+xt(t.curve,e,o))+r(t.childlist,n,e,o,i,!0))+(!a&&i?'" />':"");i||a||(u+='" />');return u}(j,at=at?'stroke="'+ot+'" stroke-opacity="'+it+'" stroke-width="'+at+'" fill="none"':'stroke="'+ot+'" stroke-opacity="'+it+'" stroke-width="0.5" fill="'+ot+'" fill-opacity="'+it+'" fill-rule="evenodd"',et,r.minpathsegments,r.connectedcomponents),ut&&(yt+="</svg>"),yt},t.process=t.trace,st[e]={constructor:st,x:0,y:0,copy:function(){return new st(this.x,this.y)}},ht[e]={constructor:ht,width:0,height:0,size:0,data:null,at:function(r,t){return r instanceof st?(t=r.y,r=r.x):1===arguments.length&&(t=ft.floor(r/this.width),r%=this.width),0<=r&&r<this.width&&0<=t&&t<this.height&&0<this.data[this.width*t+r]},index:function(r){return new st(r%this.width,ft.floor(r/this.width))},toIndex:function(r,t){return r instanceof st&&(t=r.y,r=r.x),this.width*t+r},flip:function(r,t){r instanceof st?(t=r.y,r=r.x):1===arguments.length&&(t=ft.floor(r/this.width),r%=this.width),this.data[this.width*t+r]=this.at(r,t)?0:1},copy:function(){for(var r=new ht(this.width,this.height),t=0,n=this.size;t<n;++t)r.data[t]=this.data[t];return r}},pt[e]={constructor:pt,area:0,len:0,sign:"",lon:null,curve:null,pt:null,minX:1e6,minY:1e6,maxX:-1,maxY:-1,next:null,sibling:null,childlist:null},dt[e]={constructor:dt,n:0,tag:null,c:null,alphaCurve:0,vertex:null,alpha:null,alpha0:null,beta:null},vt[e]={constructor:vt,data:null,at:function(r,t){return this.data[3*r+t]}},wt[e]={constructor:wt,x:0,y:0,xy:0,x2:0,y2:0},mt[e]={constructor:mt,pen:0,c:null,t:0,s:0,alpha:0};var t,e,ft,a,lt,X=t;function xt(r,t,n){for(var e,o,i,a=r.n,u=0,y="M"+(r.c[3*(a-1)+2].x*t).toFixed(3)+" "+(r.c[3*(a-1)+2].y*t).toFixed(3)+" ",f=0;f<a;++f)"CURVETO"===r.tag[f]?(y+=(o=f,i=t,"C "+((e=r).c[3*o+0].x*i).toFixed(3)+" "+(e.c[3*o+0].y*i).toFixed(3)+","+(e.c[3*o+1].x*i).toFixed(3)+" "+(e.c[3*o+1].y*i).toFixed(3)+","+(e.c[3*o+2].x*i).toFixed(3)+" "+(e.c[3*o+2].y*i).toFixed(3)+" "),u+=3):"CORNER"===r.tag[f]&&(y+=(e=f,o=t,"L "+((i=r).c[3*e+1].x*o).toFixed(3)+" "+(i.c[3*e+1].y*o).toFixed(3)+" "+(i.c[3*e+2].x*o).toFixed(3)+" "+(i.c[3*e+2].y*o).toFixed(3)+" "),u+=2);return y+="z ",u<n?"":y}function ct(r,t){for(var n in t)Object[e].hasOwnProperty.call(t,n)&&!Object[e].hasOwnProperty.call(r,n)&&(r[n]=t[n]);return r}function st(r,t){this.x=r||0,this.y=t||0}function ht(r,t,n){var e,o,i=this;if(i.width=r,i.height=t,i.size=o=r*t,i.data=new a(i.size),n)for(e=0;e<o;++e)i.data[e]=n[e]?1:0;else for(e=0;e<o;++e)i.data[e]=0}function pt(){var r=this;r.area=0,r.len=0,r.curve={},r.pt=[],r.minX=1e6,r.minY=1e6,r.maxX=-1,r.maxY=-1}function dt(r){var t=this;t.n=r,t.tag=new Array(r),t.c=new Array(3*r),t.alphaCurve=0,t.vertex=new Array(r),t.alpha=new Array(r),t.alpha0=new Array(r),t.beta=new Array(r)}function vt(){this.data=[0,0,0,0,0,0,0,0,0]}function wt(r,t,n,e,o){var i=this;i.x=r,i.y=t,i.xy=n,i.x2=e,i.y2=o}function mt(){var r=this;r.pen=0,r.c=[new st,new st],r.t=0,r.s=0,r.alpha=0}function gt(r,t){for(var n,e,o,i,a,u=t.pt,y=u[0].y,f=t.len,l=1;l<f;++l)if(n=u[l].x,(e=u[l].y)!==y){for(i=y<e?y:e,o=t.maxX,a=n;a<o;++a)r.flip(a,i);y=e}}function At(r,t){return t<=r?r%t:0<=r?r:t-1-(-1-r)%t}function bt(r,t){return r.x*t.y-r.y*t.x}function Ft(r,t,n){return r<=n?r<=t&&t<n:r<=t||t<n}function Ot(r){return 0<r?1:r<0?-1:0}function Rt(r,t){for(var n,e=[t.x,t.y,1],o=0,i=0;i<3;++i)for(n=0;n<3;++n)o+=e[i]*r.at(i,n)*e[n];return o}function Xt(r,t,n){return new st(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))}function kt(r,t,n){var e=t.x-r.x,t=t.y-r.y,o=n.x-r.x;return e*(n.y-r.y)-o*t}function St(r,t,n,e){var o=t.x-r.x,t=t.y-r.y,r=e.x-n.x;return o*(e.y-n.y)-r*t}function Yt(r,t,n){var e=t.x-r.x,t=t.y-r.y;return e*(n.x-r.x)+t*(n.y-r.y)}function Ct(r,t){r=ft.abs(r),t=ft.abs(t);var n=ft.max(r,t);return 0===n?0:n*ft.sqrt((r/=n)*r+(t/=n)*t)}function Ut(r,t){return Ct(r.x-t.x,r.y-t.y)}function zt(r,t,n,e,o){var i=1-r,a=r*r,u=i*i,y=u*i,f=a*r,u=3*u*r,r=3*a*i;return new st(y*t.x+u*n.x+r*e.x+f*o.x,y*t.y+u*n.y+r*e.y+f*o.y)}function Et(r,t,n,e,o,i){var r=St(r,t,o,i),t=St(t,n,o,i),n=r-2*t+St(n,e,o,i),e=-2*r+2*t,o=e*e-4*n*r;return 0===n||o<0?-1:(t=(-e-(i=ft.sqrt(o)))/(2*n),0<=(r=(-e+i)/(2*n))&&r<=1?r:0<=t&&t<=1?t:-1)}return r.potrace=X,r});