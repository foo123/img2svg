/**
*
*   img2svg.js
*   @version: 1.0.0
*   @built on 2023-09-02 19:58:54
*
*   Vectorize image data based on potrace algorithm with color
*   https://github.com/foo123/img2svg.js
*
**/!function(t,r,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[r]=n.call(t)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(r)?define(r,["module"],function(r){return n.moduleUri=r.uri,n.call(t)}):r in t||(t[r]=n.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[r]})}("undefined"!=typeof self?self:this,"img2svg",function(){"use strict";var b=Math,F="undefined"!=typeof Uint8Array?Uint8Array:Array,O="undefined"!=typeof Float32Array?Float32Array:Array;function r(r,t){var n=(t=t||{}).mode||"color",e=r.data,o=r.width,r=r.height;return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+r+'" viewBox="0 0 '+o+" "+r+'">'+function(r,t,n,e,o){if(o&&"hue"===o.mode)return function(r,t,n,e){var o,i,a,u,f,y,l,x,c,s,d,h,p,v=t*n,w=r.length,m=R(null==e.depth?6:e.depth,1,360),g=R(null==e.depthHue?m:e.depthHue,1,360),A="";for(o=b.floor(360/g),i=new O(g),a=new O(g),u=new O(g),d=new O(g),h=new Array(g),c=x=0;x<w;x+=4,++c)0<r[x+3]&&(f=r[x]/255,y=r[x+1]/255,l=r[x+2]/255,n=b.floor(function(r,t,n){var e,o;e=b.max(r,t,n),o=b.min(r,t,n),e=0==(o=e-o)?0:e===r?60*(0+(t-n)/o):e===t?60*(2+(n-r)/o):60*(4+(r-t)/o);(e=b.round(e))<0&&(e+=360);360<=e&&(e-=360);return R(e,0,360)}(f,y,l)/o),i[n]=(i[n]||0)+f,a[n]=(a[n]||0)+y,u[n]=(u[n]||0)+l,d[n]=(d[n]||0)+1,h[n]={j:c,next:h[n]||null});for(n=0;n<g;++n)if(0<d[n]){for(p=new F(v),s=h[n];s;s=s.next)p[s.j]=255;e.color=function(r,t,n){r=R(b.round(r),0,255).toString(16),t=R(b.round(t),0,255).toString(16),n=R(b.round(n),0,255).toString(16);return"#"+(r.length<2?"0":"")+r+(t.length<2?"0":"")+t+(n.length<2?"0":"")+n}(255*i[n]/d[n],255*a[n]/d[n],255*u[n]/d[n]),e.partial=!0,A+=X.trace(p,t,n,e),p=null,h[n]=null}return h=d=u=a=i=null,A}(r,t,n,e);var i,a,u,f,y,l,x,c,s,d,h,p={},v="";if(r=function(r,t,n){var e,o,i,a,u,f,y,l,x,c,s=r.length,d=R(null==t.depth?2:t.depth,1,256),h=R(null==t.depthR?d:t.depthR,1,256),p=R(null==t.depthG?d:t.depthG,1,256),v=R(null==t.depthB?d:t.depthB,1,256),d=R(null==t.depthA?d:t.depthA,1,256);if(n&&"gray"===n.mode){if(256===p&&256===d)return r;for(a=b.floor(256/p),f=b.floor(256/d),l=b.floor(a/2),c=b.floor(f/2),o=new F(s),e=0;e<s;e+=4)0<r[e+3]?(o[e+2]=o[e]=o[e+1]=R(b.floor(r[e+1]/a)*a+l,0,255),o[e+3]=R(b.floor(r[e+3]/f)*f+c,0,255)):o[e+3]=o[e+2]=o[e+1]=o[e]=0}else{if(256===h&&256===p&&256===v&&256===d)return r;for(i=b.floor(256/h),a=b.floor(256/p),u=b.floor(256/v),f=b.floor(256/d),y=b.floor(i/2),l=b.floor(a/2),x=b.floor(u/2),c=b.floor(f/2),o=new F(s),e=0;e<s;e+=4)0<r[e+3]?(o[e]=R(b.floor(r[e]/i)*i+y,0,255),o[e+1]=R(b.floor(r[e+1]/a)*a+l,0,255),o[e+2]=R(b.floor(r[e+2]/u)*u+x,0,255),o[e+3]=R(b.floor(r[e+3]/f)*f+c,0,255)):o[e+3]=o[e+2]=o[e+1]=o[e]=0}return o}(r,e,o),y=t*n,f=r.length,o&&"gray"===o.mode)for(a=i=0;i<f;i+=4,++a)0<r[i+3]&&(x=r[i+1],s=r[i+3],d=String(x),d+=","+d+","+d+","+String(s),p[d]={j:a,next:p[d]||null});else for(a=i=0;i<f;i+=4,++a)0<r[i+3]&&(l=r[i],x=r[i+1],c=r[i+2],s=r[i+3],d=String(l)+","+String(x)+","+String(c)+","+String(s),p[d]={j:a,next:p[d]||null});for(d in p)if(u=p[d]){for(h=new F(y);u;u=u.next)h[u.j]=255;e.color="rgb("+d.split(",").slice(0,3).join(",")+")",e.opacity=String((+d.split(",").pop()/255).toFixed(2)),e.partial=!0,v+=X.trace(h,t,n,e),h=null,p[d]=null}return p=null,v}(e,o,r,t,{mode:n})+"</svg>"}function R(r,t,n){return b.min(b.max(r,t),n)}r.VERSION="1.0.0";t={VERSION:"1.16"},e="prototype",yt=Math,a="undefined"!=typeof Uint8Array?Uint8Array:Array,lt={connectedcomponents:!0,minpathsegments:2,turnpolicy:"minority",turdsize:2,optcurve:!0,alphamax:1,opttolerance:.2},t.defaultOptions=function(){return st({},lt)},t.trace=function(V,T,B,r){st(r,lt);for(var V=function(r,t){var n,e,o,i=r.copy(),a=new dt(0,0);for(;a=function(r,t){var n=r.toIndex(t);for(;n<r.size&&!r.data[n];)++n;return n<r.size&&r.index(n)}(i,a);)n=function(r,t,n,e){var o,i,a,u,f=new pt,y=f.pt,l=n.x,x=n.y,c=0,s=1;f.sign=r.at(n.x,n.y)?"+":"-";for(;;){if(y.push(new dt(l,x)),l>f.maxX&&(f.maxX=l),l<f.minX&&(f.minX=l),x>f.maxY&&(f.maxY=x),x<f.minY&&(f.minY=x),++f.len,l+=c,x+=s,f.area-=l*s,l===n.x&&x===n.y)break;i=t.at(l+(c-s-1)/2,x+(s+c-1)/2),a=t.at(l+(c+s-1)/2,x+(s-c-1)/2),i&&!a?(u="majority"===e.turnpolicy||"minority"===e.turnpolicy?function(r,t,n){var e,o,i;for(e=2;e<5;++e){for(i=0,o=1-e;o<=e-1;++o)i=(i=(i=(i+=r.at(t+o,n+e-1)?1:-1)+(r.at(t+e-1,n+o-1)?1:-1))+(r.at(t+o-1,n-e)?1:-1))+(r.at(t-e,n+o)?1:-1);if(0<i)return 1;if(i<0)return 0}return 0}(t,l,x):0,s="right"===e.turnpolicy||"black"===e.turnpolicy&&"+"===f.sign||"white"===e.turnpolicy&&"-"===f.sign||"majority"===e.turnpolicy&&u||"minority"===e.turnpolicy&&!u?(o=c,c=-s,o):(o=c,c=s,-o)):i?(o=c,c=-s,s=o):a||(o=c,c=s,s=-o)}return f}(r,i,a,t),At(i,n),n.area>t.turdsize&&(o=o||n,e&&(e.next=e.sibling=n),e=n);t.connectedcomponents&&(o=function(r){var t,n,e,o;for(t=r;t;t=t.sibling)for(e=null,n=(o=t).next;n;)n=(function(r,t){return!(r.minX>t.maxX||r.minY>t.maxY||r.maxX<t.minX||r.maxY<t.minY)}(t,n)?(o.sibling=n.sibling,n.sibling=null,e?e.sibling=n:t.childlist=n,e=n,o):o=n).sibling;return r}(o));return i=null,o}(new ht(T,B,V),r),I=r,t=V;t;t=t.next){H=G=$=M=n=N=void 0;var N=t,n,M,$,G=N.pt,H=(N.x0=G[0].x,N.y0=G[0].y,N.sums=[],N.sums);for(H.push(new mt(0,0,0,0,0)),n=0;n<N.len;++n)M=G[n].x-N.x0,$=G[n].y-N.y0,H.push(new mt(H[n].x+M,H[n].y+$,H[n].xy+M*$,H[n].x2+M*M,H[n].y2+$*$));c=W=Q=K=J=i=o=e=D=rr=x=l=y=f=_=Z=L=u=a=P=void 0;var P=t,L,D,e,o,i,J,K,Q,W,a=P.len,u=P.pt,Z=new Array(a),_=new Array(a),f=new Array(4),y=[new dt,new dt],l=new dt,x=new dt,rr=new dt,c=0;for(P.lon=new Array(a),e=a-1;0<=e;--e)u[e].x!=u[c].x&&u[e].y!=u[c].y&&(c=e+1),_[e]=c;for(e=a-1;0<=e;--e){for(f[0]=f[1]=f[2]=f[3]=0,L=(3+3*(u[bt(e+1,a)].x-u[e].x)+(u[bt(e+1,a)].y-u[e].y))/2,++f[L],y[0].x=0,y[0].y=0,y[1].x=0,y[1].y=0,c=_[e],i=e;;){if(D=0,L=(3+3*Rt(u[c].x-u[i].x)+Rt(u[c].y-u[i].y))/2,++f[L],f[0]&&f[1]&&f[2]&&f[3]){Z[e]=i,D=1;break}if(l.x=u[c].x-u[e].x,l.y=u[c].y-u[e].y,Ft(y[0],l)<0||0<Ft(y[1],l))break;if(yt.abs(l.x)<=1&&yt.abs(l.y)<=1||(x.x=l.x+(0<=l.y&&(0<l.y||l.x<0)?1:-1),x.y=l.y+(l.x<=0&&(l.x<0||l.y<0)?1:-1),0<=Ft(y[0],x)&&(y[0].x=x.x,y[0].y=x.y),x.x=l.x+(l.y<=0&&(l.y<0||l.x<0)?1:-1),x.y=l.y+(0<=l.x&&(0<l.x||l.y<0)?1:-1),Ft(y[1],x)<=0&&(y[1].x=x.x,y[1].y=x.y)),!Ot(c=_[i=c],e,i))break}0===D&&(rr.x=Rt(u[c].x-u[i].x),rr.y=Rt(u[c].y-u[i].y),l.x=u[i].x-u[e].x,l.y=u[i].y-u[e].y,J=Ft(y[0],l),K=Ft(y[0],rr),Q=Ft(y[1],l),W=Ft(y[1],rr),o=1e7,K<0&&(o=yt.floor(J/-K)),0<W&&(o=yt.min(o,yt.floor(-Q/W))),Z[e]=bt(i+o,a))}for(o=Z[a-1],P.lon[a-1]=o,e=a-2;0<=e;--e)Ot(e+1,Z[e],o)&&(o=Z[e]),P.lon[e]=o;for(e=a-1;Ot(bt(e+1,a),o,P.lon[e]);--e)P.lon[e]=o;ar=ir=or=cr=xr=lr=yr=fr=ur=h=er=nr=d=s=tr=void 0;var tr=t,s,d,nr,er,or,ir,ar,h=tr.len,ur=new Array(h+1),fr=new Array(h+1),yr=new Array(h),lr=new Array(h+1),xr=new Array(h+1),cr=new Array(h+1);for(s=0;s<h;++s)(ar=bt(tr.lon[bt(s-1,h)]-1,h))==s&&(ar=bt(s+1,h)),yr[s]=ar<s?h:ar;for(d=1,s=0;s<h;++s)for(;d<=yr[s];)lr[d]=s,d++;for(d=s=0;s<h;++d)xr[d]=s,s=yr[s];for(xr[d]=h,s=h,d=nr=d;0<d;--d)cr[d]=s,s=lr[s];for(cr[0]=0,ur[0]=0,d=1;d<=nr;++d)for(s=cr[d];s<=xr[d];++s){for(ir=-1,er=xr[d-1];er>=lr[s];--er)or=function(r,t,n){var e,o,i,a,u,f,y=r.len,l=r.pt,r=r.sums,x=0;y<=n&&(n-=y,x=1);x=0===x?(e=r[n+1].x-r[t].x,o=r[n+1].y-r[t].y,a=r[n+1].x2-r[t].x2,i=r[n+1].xy-r[t].xy,u=r[n+1].y2-r[t].y2,n+1-t):(e=r[n+1].x-r[t].x+r[y].x,o=r[n+1].y-r[t].y+r[y].y,a=r[n+1].x2-r[t].x2+r[y].x2,i=r[n+1].xy-r[t].xy+r[y].xy,u=r[n+1].y2-r[t].y2+r[y].y2,n+1-t+y);return r=(l[t].x+l[n].x)/2-l[0].x,y=(l[t].y+l[n].y)/2-l[0].y,f=l[n].x-l[t].x,n=-(l[n].y-l[t].y),l=n*n*((a-2*e*r)/x+r*r)+2*n*f*((i-e*y-o*r)/x+r*y)+f*f*((u-2*o*y)/x+y*y),yt.sqrt(l)}(tr,er,s)+ur[er],(ir<0||or<ir)&&(fr[s]=er,ir=or);ur[s]=ir}for(tr.m=nr,tr.po=new Array(nr),s=h,d=nr-1;0<s;--d)s=fr[s],tr.po[d]=s;Ar=gr=mr=wr=vr=pr=hr=dr=b=A=R=g=m=w=v=sr=O=Yr=Sr=kr=Xr=Rr=Or=Fr=br=F=p=void 0;var p=t,sr,v,w,m,g,A,b,dr,hr,pr,vr,wr,mr,gr,Ar,F=p.m,br=p.po,Fr=p.len,Or=p.pt,Rr=p.x0,Xr=p.y0,kr=new Array(F),Sr=new Array(F),Yr=new Array(F),O=new Array(3),R=new dt;for(p.curve=new vt(F),v=0;v<F;++v)w=br[bt(v+1,F)],w=bt(w-br[v],Fr)+br[v],kr[v]=new dt,Sr[v]=new dt,!function(r,t,n,e,o){var i,a,u,f,y,l,x=r.len,r=r.sums,c=0;for(;x<=n;)n-=x,c+=1;for(;x<=t;)t-=x,--c;for(;n<0;)n+=x,--c;for(;t<0;)t+=x,c+=1;y=r[n+1].x-r[t].x+c*r[x].x,i=r[n+1].y-r[t].y+c*r[x].y,f=r[n+1].x2-r[t].x2+c*r[x].x2,u=r[n+1].xy-r[t].xy+c*r[x].xy,r=r[n+1].y2-r[t].y2+c*r[x].y2,a=n+1-t+c*x,e.x=y/a,e.y=i/a,e=(u-y*i/a)/a,y=((u=(f-y*y/a)/a)+(f=(r-i*i/a)/a)+yt.sqrt((u-f)*(u-f)+4*e*e))/2,u-=y,f-=y,yt.abs(u)>=yt.abs(f)?0!==(l=Ct(u,e))&&(o.x=-e/l,o.y=u/l):0!==(l=Ct(f,e))&&(o.x=-f/l,o.y=e/l);0===l&&(o.x=o.y=0)}(p,br[v],w,kr[v],Sr[v]);for(v=0;v<F;++v)if(Yr[v]=new wt,0===(sr=Sr[v].x*Sr[v].x+Sr[v].y*Sr[v].y))for(w=0;w<3;++w)for(m=0;m<3;++m)Yr[v].data[3*w+m]=0;else for(O[0]=Sr[v].y,O[1]=-Sr[v].x,O[2]=-O[1]*kr[v].y-O[0]*kr[v].x,g=0;g<3;++g)for(m=0;m<3;++m)Yr[v].data[3*g+m]=O[g]*O[m]/sr;for(v=0;v<F;++v){for(A=new wt,b=new dt,R.x=Or[br[v]].x-Rr,R.y=Or[br[v]].y-Xr,w=bt(v-1,F),g=0;g<3;++g)for(m=0;m<3;++m)A.data[3*g+m]=Yr[w].at(g,m)+Yr[v].at(g,m);for(;;){if(0!=(pr=A.at(0,0)*A.at(1,1)-A.at(0,1)*A.at(1,0))){b.x=(-A.at(0,2)*A.at(1,1)+A.at(1,2)*A.at(0,1))/pr,b.y=(A.at(0,2)*A.at(1,0)-A.at(1,2)*A.at(0,0))/pr;break}for(A.at(0,0)>A.at(1,1)?(O[0]=-A.at(0,1),O[1]=A.at(0,0)):A.at(1,1)?(O[0]=-A.at(1,1),O[1]=A.at(1,0)):(O[0]=1,O[1]=0),sr=O[0]*O[0]+O[1]*O[1],O[2]=-O[1]*R.y-O[0]*R.x,g=0;g<3;++g)for(m=0;m<3;++m)A.data[3*g+m]+=O[g]*O[m]/sr}if(dr=yt.abs(b.x-R.x),hr=yt.abs(b.y-R.y),dr<=.5&&hr<=.5)p.curve.vertex[v]=new dt(b.x+Rr,b.y+Xr);else{if(vr=Xt(A,R),mr=R.x,gr=R.y,0!==A.at(0,0))for(Ar=0;Ar<2;++Ar)b.y=R.y-.5+Ar,b.x=-(A.at(0,1)*b.y+A.at(0,2))/A.at(0,0),dr=yt.abs(b.x-R.x),wr=Xt(A,b),dr<=.5&&wr<vr&&(vr=wr,mr=b.x,gr=b.y);if(0!==A.at(1,1))for(Ar=0;Ar<2;++Ar)b.x=R.x-.5+Ar,b.y=-(A.at(1,0)*b.x+A.at(1,2))/A.at(1,1),hr=yt.abs(b.y-R.y),wr=Xt(A,b),hr<=.5&&wr<vr&&(vr=wr,mr=b.x,gr=b.y);for(g=0;g<2;++g)for(m=0;m<2;++m)b.x=R.x-.5+g,b.y=R.y-.5+m,(wr=Xt(A,b))<vr&&(vr=wr,mr=b.x,gr=b.y);p.curve.vertex[v]=new dt(mr+Rr,gr+Xr)}}if("-"===t.sign){zr=Ur=Cr=qr=Er=jr=void 0;var jr=t,Cr,Ur,zr,jr,Er=(jr=jr.curve).n,qr=jr.vertex;for(Cr=0,Ur=Er-1;Cr<Ur;++Cr,--Ur)zr=qr[Cr],qr[Cr]=qr[Ur],qr[Ur]=zr}Ir=k=S=Br=X=Tr=Y=Nr=Vr=jr=void 0;var Vr=I,Tr,X,k,S,Br,Ir,Nr=(jr=t).curve.n,Y=jr.curve;for(Tr=0;Tr<Nr;++Tr)X=bt(Tr+1,Nr),Br=bt(Tr+2,Nr),Ir=kt(.5,Y.vertex[Br],Y.vertex[X]),0!==(S=function(r,t){var n=function(r,t){return new dt(-Rt(t.y-r.y),Rt(t.x-r.x))}(r,t);return n.y*(t.x-r.x)-n.x*(t.y-r.y)}(Y.vertex[Tr],Y.vertex[Br]))?(S=St(Y.vertex[Tr],Y.vertex[X],Y.vertex[Br])/S,S=yt.abs(S),k=1<S?1-1/S:0,k/=.75):k=4/3,(Y.alpha0[X]=k)>=Vr.alphamax?(Y.tag[X]="CORNER",Y.c[3*X+1]=Y.vertex[X]):(k<.55?k=.55:1<k&&(k=1),S=kt(.5+.5*k,Y.vertex[Tr],Y.vertex[X]),Br=kt(.5+.5*k,Y.vertex[Br],Y.vertex[X]),Y.tag[X]="CURVETO",Y.c[3*X+0]=S,Y.c[3*X+1]=Br),Y.c[3*X+2]=Ir,Y.alpha[X]=k,Y.beta[X]=.5;if(Y.alphacurve=1,I.optcurve){nt=tt=Kr=Jr=U=Dr=Lr=Pr=Hr=rt=C=j=Gr=_r=q=Zr=Wr=Qr=E=z=$r=Mr=void 0;var Mr=t,$r=I,Gr,j,C,Hr,Pr,Lr,Dr,U,Jr,Kr,z=Mr.curve,E=z.n,Qr=z.vertex,Wr=new Array(E+1),Zr=new Array(E+1),q=new Array(E+1),_r=new Array(E+1),rt=new gt,tt=new Array(E),nt=new Array(E+1);for(j=0;j<E;++j)"CURVETO"===z.tag[j]?tt[j]=Rt(St(Qr[bt(j-1,E)],Qr[j],Qr[bt(j+1,E)])):tt[j]=0;for(nt[Lr=0]=0,Hr=z.vertex[0],j=0;j<E;++j)Pr=bt(j+1,E),"CURVETO"===z.tag[Pr]&&(Dr=z.alpha[Pr],Lr=(Lr+=.3*Dr*(4-Dr)*St(z.c[3*j+2],Qr[Pr],z.c[3*Pr+2])/2)+St(Hr,z.c[3*j+2],z.c[3*Pr+2])/2),nt[j+1]=Lr;for(Wr[0]=-1,Zr[0]=0,q[0]=0,C=1;C<=E;++C)for(Wr[C]=C-1,Zr[C]=Zr[C-1],q[C]=q[C-1]+1,j=C-2;0<=j&&!function(r,t,n,e,o,i,a){var u,f,y,l,x,c,s,d,h,p,v,w,m,g,A,b,F,O=r.curve.n,R=r.curve,X=R.vertex;if(t===n)return 1;if(x=bt((u=t)+1,O),f=bt(u+1,O),0===(l=i[f]))return 1;for(c=Ut(X[t],X[x]),u=f;u!=n;u=f){if(f=bt(u+1,O),y=bt(u+2,O),i[f]!==l)return 1;if(Rt(Yt(X[t],X[x],X[f],X[y]))!==l)return 1;if(function(r,t,n,e){var o;return o=t.x-r.x,t=t.y-r.y,r=e.x-n.x,e=e.y-n.y,o*r+t*e}(X[t],X[x],X[f],X[y])<c*Ut(X[f],X[y])*-.999847695156)return 1}h=R.c[3*bt(t,O)+2].copy(),p=X[bt(t+1,O)].copy(),v=X[bt(n,O)].copy(),w=R.c[3*bt(n,O)+2].copy(),r=a[n]-a[t],r-=St(X[0],R.c[3*t+2],R.c[3*n+2])/2,n<=t&&(r+=a[O]);if(a=St(h,p,v),g=St(h,p,w),A=St(h,v,w),b=a+A-g,g===a)return 1;if(a=g/(g-a),0==(g=g*(F=A/(A-b))/2))return 1;for(A=r/g,b=2-yt.sqrt(4-A/.3),e.c[0]=kt(F*b,h,p),e.c[1]=kt(a*b,w,v),e.alpha=b,e.t=F,e.s=a,p=e.c[0].copy(),v=e.c[1].copy(),e.pen=0,u=bt(t+1,O);u!=n;u=f){if(f=bt(u+1,O),(F=Et(h,p,v,w,X[u],X[f]))<-.5)return 1;if(m=zt(F,h,p,v,w),0===(c=Ut(X[u],X[f])))return 1;if(s=St(X[u],X[f],m)/c,yt.abs(s)>o)return 1;if(jt(X[u],X[f],m)<0||jt(X[f],X[u],m)<0)return 1;e.pen+=s*s}for(u=t;u!=n;u=f){if(f=bt(u+1,O),(F=Et(h,p,v,w,R.c[3*u+2],R.c[3*f+2]))<-.5)return 1;if(m=zt(F,h,p,v,w),0===(c=Ut(R.c[3*u+2],R.c[3*f+2])))return 1;if(s=St(R.c[3*u+2],R.c[3*f+2],m)/c,d=St(R.c[3*u+2],R.c[3*f+2],X[f])/c,(d*=.75*R.alpha[f])<0&&(s=-s,d=-d),s<d-o)return 1;s<d&&(e.pen+=(s-d)*(s-d))}return 0}(Mr,j,bt(C,E),rt,$r.opttolerance,tt,nt);--j)(q[C]>q[j]+1||q[C]==q[j]+1&&Zr[C]>Zr[j]+rt.pen)&&(Wr[C]=j,Zr[C]=Zr[j]+rt.pen,q[C]=q[j]+1,_r[C]=rt,rt=new gt);for(Gr=q[E],U=new vt(Gr),Jr=new Array(Gr),Kr=new Array(Gr),C=E,j=Gr-1;0<=j;--j)Wr[C]===C-1?(U.tag[j]=z.tag[bt(C,E)],U.c[3*j+0]=z.c[3*bt(C,E)+0],U.c[3*j+1]=z.c[3*bt(C,E)+1],U.c[3*j+2]=z.c[3*bt(C,E)+2],U.vertex[j]=z.vertex[bt(C,E)],U.alpha[j]=z.alpha[bt(C,E)],U.alpha0[j]=z.alpha0[bt(C,E)],U.beta[j]=z.beta[bt(C,E)],Jr[j]=Kr[j]=1):(U.tag[j]="CURVETO",U.c[3*j+0]=_r[C].c[0],U.c[3*j+1]=_r[C].c[1],U.c[3*j+2]=z.c[3*bt(C,E)+2],U.vertex[j]=kt(_r[C].s,z.c[3*bt(C,E)+2],Qr[bt(C,E)]),U.alpha[j]=_r[C].alpha,U.alpha0[j]=_r[C].alpha,Jr[j]=_r[C].s,Kr[j]=_r[C].t),C=Wr[C];for(j=0;j<Gr;++j)Pr=bt(j+1,Gr),U.beta[j]=Jr[j]/(Jr[j]+Kr[Pr]);U.alphacurve=1,Mr.curve=U}}var et=+(r.scale||1),ot=r.color||"#000",it=r.opacity||"1.0",at=r.outline,ut=!r.partial,T=T*et,B=B*et,ft="";return ut&&(ft+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="'+T+'" height="'+B+'" viewBox="0 0 '+T+" "+B+'">'),ft+=function(r,t,n,e,o){if(!r)return"";var i,a="";o||(a+="<path "+t+' d="');for(;r;r=r.sibling)(i=function r(t,n){if(!t)return{d:"",l:0};var e,o,i=t.curve,a=i.n,u=1,f="M"+(i.c[3*(a-1)+2].x*n).toFixed(3)+" "+(i.c[3*(a-1)+2].y*n).toFixed(3)+" ";for(e=0;e<a;++e)"CURVETO"===i.tag[e]?(f+=xt(i,e,n),u+=3):"CORNER"===i.tag[e]&&(f+=ct(i,e,n),u+=2);f+="z ";for(t=t.childlist;t;t=t.sibling)o=r(t,n),f+=o.d,u+=o.l;return{d:f,l:u}}(r,n)).l<e||(o&&(a+="<path "+t+' d="'),a+=i.d,o&&(a+='" />'));o||(a+='" />');return a}(V,at=at?'stroke="'+ot+'" stroke-opacity="'+it+'" stroke-width="'+at+'" fill="none"':'stroke="'+ot+'" stroke-opacity="'+it+'" stroke-width="0.5" fill="'+ot+'" fill-opacity="'+it+'" fill-rule="evenodd"',et,r.minpathsegments,r.connectedcomponents),ut&&(ft+="</svg>"),ft},t.process=t.trace,dt[e]={constructor:dt,x:0,y:0,copy:function(){return new dt(this.x,this.y)}},ht[e]={constructor:ht,width:0,height:0,size:0,data:null,at:function(r,t){return r instanceof dt?(t=r.y,r=r.x):1===arguments.length&&(t=yt.floor(r/this.width),r%=this.width),0<=r&&r<this.width&&0<=t&&t<this.height&&0<this.data[this.width*t+r]},index:function(r){return new dt(r%this.width,yt.floor(r/this.width))},toIndex:function(r,t){return r instanceof dt&&(t=r.y,r=r.x),this.width*t+r},flip:function(r,t){r instanceof dt?(t=r.y,r=r.x):1===arguments.length&&(t=yt.floor(r/this.width),r%=this.width),this.data[this.width*t+r]=this.at(r,t)?0:1},copy:function(){for(var r=new ht(this.width,this.height),t=0,n=this.size;t<n;++t)r.data[t]=this.data[t];return r}},pt[e]={constructor:pt,area:0,len:0,sign:"",lon:null,curve:null,pt:null,minX:1e6,minY:1e6,maxX:-1,maxY:-1,next:null,sibling:null,childlist:null},vt[e]={constructor:vt,n:0,tag:null,c:null,alphaCurve:0,vertex:null,alpha:null,alpha0:null,beta:null},wt[e]={constructor:wt,data:null,at:function(r,t){return this.data[3*r+t]}},mt[e]={constructor:mt,x:0,y:0,xy:0,x2:0,y2:0},gt[e]={constructor:gt,pen:0,c:null,t:0,s:0,alpha:0};var t,e,yt,a,lt,X=t;function xt(r,t,n){return"C "+(r.c[3*t+0].x*n).toFixed(3)+" "+(r.c[3*t+0].y*n).toFixed(3)+","+(r.c[3*t+1].x*n).toFixed(3)+" "+(r.c[3*t+1].y*n).toFixed(3)+","+(r.c[3*t+2].x*n).toFixed(3)+" "+(r.c[3*t+2].y*n).toFixed(3)+" "}function ct(r,t,n){return"L "+(r.c[3*t+1].x*n).toFixed(3)+" "+(r.c[3*t+1].y*n).toFixed(3)+" "+(r.c[3*t+2].x*n).toFixed(3)+" "+(r.c[3*t+2].y*n).toFixed(3)+" "}function st(r,t){for(var n in t)Object[e].hasOwnProperty.call(t,n)&&!Object[e].hasOwnProperty.call(r,n)&&(r[n]=t[n]);return r}function dt(r,t){this.x=r||0,this.y=t||0}function ht(r,t,n){var e,o,i=this;if(i.width=r,i.height=t,i.size=o=r*t,i.data=new a(i.size),n)for(e=0;e<o;++e)i.data[e]=n[e]?1:0;else for(e=0;e<o;++e)i.data[e]=0}function pt(){var r=this;r.area=0,r.len=0,r.curve={},r.pt=[],r.minX=1e6,r.minY=1e6,r.maxX=-1,r.maxY=-1}function vt(r){var t=this;t.n=r,t.tag=new Array(r),t.c=new Array(3*r),t.alphaCurve=0,t.vertex=new Array(r),t.alpha=new Array(r),t.alpha0=new Array(r),t.beta=new Array(r)}function wt(){this.data=[0,0,0,0,0,0,0,0,0]}function mt(r,t,n,e,o){var i=this;i.x=r,i.y=t,i.xy=n,i.x2=e,i.y2=o}function gt(){var r=this;r.pen=0,r.c=[new dt,new dt],r.t=0,r.s=0,r.alpha=0}function At(r,t){for(var n,e,o,i,a,u=t.pt,f=u[0].y,y=t.len,l=1;l<y;++l)if(n=u[l].x,(e=u[l].y)!==f){for(i=f<e?f:e,o=t.maxX,a=n;a<o;++a)r.flip(a,i);f=e}}function bt(r,t){return t<=r?r%t:0<=r?r:t-1-(-1-r)%t}function Ft(r,t){return r.x*t.y-r.y*t.x}function Ot(r,t,n){return r<=n?r<=t&&t<n:r<=t||t<n}function Rt(r){return 0<r?1:r<0?-1:0}function Xt(r,t){for(var n,e=[t.x,t.y,1],o=0,i=0;i<3;++i)for(n=0;n<3;++n)o+=e[i]*r.at(i,n)*e[n];return o}function kt(r,t,n){return new dt(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))}function St(r,t,n){var e=t.x-r.x,t=t.y-r.y,o=n.x-r.x;return e*(n.y-r.y)-o*t}function Yt(r,t,n,e){var o=t.x-r.x,t=t.y-r.y,r=e.x-n.x;return o*(e.y-n.y)-r*t}function jt(r,t,n){var e=t.x-r.x,t=t.y-r.y;return e*(n.x-r.x)+t*(n.y-r.y)}function Ct(r,t){r=yt.abs(r),t=yt.abs(t);var n=yt.max(r,t);return 0===n?0:n*yt.sqrt((r/=n)*r+(t/=n)*t)}function Ut(r,t){return Ct(r.x-t.x,r.y-t.y)}function zt(r,t,n,e,o){var i=1-r,a=r*r,u=i*i,f=u*i,y=a*r,u=3*u*r,r=3*a*i;return new dt(f*t.x+u*n.x+r*e.x+y*o.x,f*t.y+u*n.y+r*e.y+y*o.y)}function Et(r,t,n,e,o,i){var r=Yt(r,t,o,i),t=Yt(t,n,o,i),n=r-2*t+Yt(n,e,o,i),e=-2*r+2*t,o=e*e-4*n*r;return 0===n||o<0?-1:(t=(-e-(i=yt.sqrt(o)))/(2*n),0<=(r=(-e+i)/(2*n))&&r<=1?r:0<=t&&t<=1?t:-1)}return r.potrace=X,r});